  <!-- ######################## -->
  <!-- ##### JS FOR PAGE  ##### -->
  <!-- ######################## -->
	<script type="text/javascript">


    $(document).ready(function () {

      
      
      // ##### TEXT ROTATOR - display features
      var rotatorlst=[ 'photo gallery with multiple layouts', 'lightbox with customizable tools', 'responsive thumbnails sizes', 'display animations', 'gallery pagination',
          'javascript API', 'video support (Youtube, Vimeo, Dailymotion)', 'chainable hover effects', 'social sharing', 'retina and hi-dpi screen support', 'customizable tools on thumbnails', 'pinch zoom', 'swipe to paginate',
          'location on Google Maps', 'thumbnails with blurred preview', 'justified, grid, cascading and mosaic layouts',
          'filter by keywords', 'navigation in albums', 'self hosted images', 'google photos and flickr data sources',
          'thumbnail selection mode with checkboxes', 'support multi-touch gesture', 'hover effects on touchscreen', 'deep linking',
          'highly customizable', 'browser back/forward navigation', 'slideshow', 'image lazy loading and pre-loading', 'keyboard support',
          'inactive state detection', 'themes', 'multiple galleries', 'nested folder navigation',
          'custom icons'
        ];
      
      function RotatorNext(n) {
        var tweenable = new NGTweenable();
        tweenable.tween({
          from:       { opacity: 1 },
          to:         { opacity: 0 },
          attachment: { n: n },
          easing:     'easeInOutSine',
          duration:   100,
          step: function (state, att) {
            jQuery('#rotator').css('opacity', state.opacity);
          },
          finish: function (state, att) {
            jQuery('#rotator').text(rotatorlst[n]);
            var tweenable = new NGTweenable();
            tweenable.tween({
              from:       { opacity: 0 },
              to:         { opacity: 1 },
              attachment: { n: n },
              easing:     'easeInOutSine',
              duration:   100,
              step: function (state, att) {
                jQuery('#rotator').css('opacity', state.opacity);
              },
              finish: function (state, att) {
                var n=att.n;
                n++;
                if( n>= rotatorlst.length ) { n=0; }
                setTimeout(function(){
                    RotatorNext(n);
                }, 1500);        
              }
            });
          }
        });
      }
      // RotatorNext(0);




      var data_url = 'https://spreadsheets.google.com/feeds/list/1pKGg3MA1YLSWFuFEqLwJLYzuVPeNAOEMzpw6-XC8_e8/od6/public/values?alt=json';


      function fetchJSONFile(path, callback) {
          var httpRequest = new XMLHttpRequest();
          httpRequest.onreadystatechange = function() {
              if (httpRequest.readyState === 4) {
                  if (httpRequest.status === 200) {
                      var data = JSON.parse(httpRequest.responseText);
                      if (callback) callback(data);
                  }
              }
          };
          httpRequest.open('GET', path);
          httpRequest.send(); 
      }

      // this requests the file and executes a callback with the parsed result once
      //   it is available
      fetchJSONFile(data_url, function(data){
          // do something with your data
          var nano_map_areas = data.feed.entry;

          var translation = [];
          var blackList  = '';
          nano_map_areas.forEach( function(item) {
            var titre = item.gsx$affichagegallerie.$t;
            var id = item.gsx$identifiant.$t;   // .replace(/_/gi, ' ');
            if( titre != '' && id != '' ) {
              translation.push( { title: id.replace(/_/gi, ' '), replace: titre } );
            }
            else {
              if( id != '' ) {
                if( blackList != '' ) {
                  blackList += '|';
                }
                blackList += id;
              }
            }
          });
          console.dir(translation);
          console.log(blackList);
          
          jQuery("#nanogallery_debug_on").nanogallery2({
            kind: 'nano_photos_provider2',
            dataProvider: 'https://urbanicc.fr/zac_ic/nano_photos_provider2/nano_photos_provider2.php',

thumbnailAlignment: 'center',

            galleryRenderDelay: 1200,
            galleryDisplayTransition: 'rotateX',
            galleryDisplayTransitionDuration: 1500,
            galleryL1DisplayTransition: 'slideUp',
            thumbnailHeight: 200, thumbnailWidth: 'auto',
            thumbnailL1Height: 200, thumbnailL1Width: 200,
            
            thumbnailDisplayTransition: 'slideLeft',
            thumbnailDisplayTransitionDuration: 600,
            thumbnailDisplayInterval: 90,
            thumbnailL1DisplayInterval: 30,
            galleryMaxRows: 10000,
            galleryDisplayMode: 'rows',

            thumbnailL1GutterWidth: 10,
            thumbnailL1GutterHeight: 10,
            thumbnailBorderHorizontal: 0,
            thumbnailBorderVertical: 0,
            thumbnailGutterWidth: 2,
            thumbnailGutterHeight: 2,


            thumbnailLabel:       { display: false, position: 'overImage', valign: 'bottom', hideIcons: true, titleMultiLine: true },
            thumbnailL1Label:     { display: true, position: 'right', valign: 'middle', align: 'center', hideIcons: true, titleMultiLine: true },      
        

            thumbnailL1HoverEffect2: 'image_scale_1.10_1.00',
            thumbnailHoverEffect2: null,

            thumbnailToolbarImage : { topLeft: '', topRight : '' },
            thumbnailToolbarAlbum : { topLeft: '', topRight : 'counter' },
            galleryTheme : { 
              thumbnail: { titleShadow : 'none', descriptionShadow : 'none', titleColor: '#000', labelBackground:'#ffe000' },
              navigationBreadcrumb: { background : '#3C4B5B' },
              navigationFilter: { background : '#2E7C7F', backgroundSelected: '#19676B', color: '#eee' }
            },

            gallerySorting : 'titleAsc',
            viewerToolbar : { display: false },
            viewerTools: { topRight:  'infoButton, zoomButton, fullscreenButton, closeButton' } ,  
            locationHash: false,
            title_translation_map: translation,
            blackList: blackList
          });
          
          //alert('ok');
      });









      
      // DEBUG GALLERY
      function mylistener(cart, item) {
        // console.log(e.type);
        console.dir(cart);
        console.dir(item);
        // var ngy2data=$("#nanogallery_debug_on").nanogallery2('data');
        // console.dir(ngy2data);
      }      
      jQuery("#nanogallery_debug_onXX").nanogallery2({
        fnShoppingCartUpdated: mylistener,
        // imageTransition : 'slideAppear',
        // debugMode: true,
        
        //kind: 'google',
        //userID: '111186676244625461692',
        // photoset: 'NONE',
        // allowHTMLinData: true,
        // fnImgDisplayed: fnOpenNewTab,
        itemsBaseURL:     'https://nanogallery2.nanostudio.org/samples/',
        items: [
            { src: 'https://www.youtube.com/watch?v=Ir098VWCv8Q', srct: 'berlin1_t.jpg', title: 'youtube' },
            { src: 'https://vimeo.com/32875422', srct: 'https://i.vimeocdn.com/video/222726041_1280x720.jpg', title: 'vimeo' },
            { src: 'http://www.dailymotion.com/video/x4wtyl6', srct: 'berlin1_t.jpg', title: 'dailymotion' },
            { src: 'berlin1.jpg', srct: 'berlin1_t.jpg', title: 'Berlin 1' },
            { src: 'berlin2.jpg', srct: 'berlin2_t.jpg', title: 'Berlin 2' },
            { src: 'berlin3.jpg', srct: 'berlin3_t.jpg', title: 'Berlin 3' },
            { src: 'blocks.mp4', srct: 'blocks_mp4_t.jpg', title: 'Blocks video MP4' },
            { src: 'blocks.ogv', srct: 'blocks_ogv_t.jpg', title: 'Blocks video OGV' },
            { src: 'blocks.webm', srct: 'blocks_webm_t.jpg', title: 'Blocks video WEBM' }
          ],

        kind: 'nano_photos_provider2',
//        dataProvider: 'https://nano.gallery/nano_photos_provider2/nano_photos_provider2.php',
        dataProvider: 'https://nano.gallery/nano_photos_provider2_kris/nano_photos_provider2.php',
        dataProvider: 'https://urbanicc.fr/zac_ic/nano_photos_provider2/nano_photos_provider2.php',
        // kind: 'flickr',
        // userID: '149035168@N08',    // nano studio
        //album: 'none',
        // userID: '148691806@N05',  
        // flickrSkipOriginal: false,
        //album: 'into%20the%20wild',
        // albumList2: ['into the wild', 'fun'],
        //dataProvider: 'http://localhost:12345/nano_photos_provider2/dist/nano_photos_provider2.php',
               
        galleryRenderDelay: 120,
        //galleryDisplayTransition: 'rotateX',
        galleryDisplayTransitionDuration: 1500,
        //galleryL1DisplayTransition: 'slideUp',
      
        galleryMosaicXXX : [
          { w: 2, h: 2, c: 1, r: 1 },
          { w: 2, h: 1, c: 3, r: 1 },
          { w: 2, h: 1, c: 3, r: 2 },
          { w: 1, h: 1, c: 5, r: 1 },
          { w: 1, h: 1, c: 5, r: 2 },
          { w: 1, h: 2, c: 6, r: 1 },
          { w: 1, h: 1, c: 1, r: 3 },
          { w: 1, h: 1, c: 2, r: 3 },
          { w: 1, h: 1, c: 3, r: 3 },
          { w: 1, h: 1, c: 4, r: 3 },
          { w: 1, h: 1, c: 5, r: 3 },
          { w: 1, h: 1, c: 6, r: 3 }
        ],
        galleryMosaicXXX : [
          { w: 2, h: 2, c: 1, r: 2 },
          { w: 2, h: 2, c: 3, r: 1 },
          { w: 2, h: 2, c: 3, r: 3 },
          { w: 2, h: 2, c: 5, r: 2 },
          { w: 2, h: 2, c: 7, r: 1 },
          { w: 2, h: 2, c: 7, r: 3 },
        ],
        galleryMosaicXXX : [
          { w: 4, h: 3, c: 1, r: 1 },
          { w: 2, h: 2, c: 5, r: 1 },
          { w: 2, h: 2, c: 7, r: 1 },
          { w: 4, h: 3, c: 5, r: 3 },
          { w: 2, h: 2, c: 1, r: 4 },
          { w: 2, h: 2, c: 3, r: 4 },
        ],



        
        thumbnailAlignment: 'scaled',

        thumbnailHeight: 200, thumbnailWidth: 'auto',
        thumbnailL1Height: 200, thumbnailL1Width: 200,
        
        thumbnailDisplayTransition: 'slideLeft',
        thumbnailDisplayTransitionDuration: 600,
        thumbnailDisplayInterval: 90,
        thumbnailL1DisplayInterval: 30,
        galleryMaxRows: 10000,
        galleryDisplayMode: 'rows',

        thumbnailL1GutterWidth: 10,
        thumbnailL1GutterHeight: 10,
        thumbnailBorderHorizontal: 0,
        thumbnailBorderVertical: 0,
        thumbnailGutterWidth: 2,
        thumbnailGutterHeight: 2,


        galleryPaginationMode: 'rectangles',
thumbnailLabel:       { display: false, position: 'overImage', valign: 'bottom', hideIcons: true, titleMultiLine: true },
thumbnailL1Label:     { display: true, position: 'right', valign: 'middle', align: 'center', hideIcons: true, titleMultiLine: true },      
        
        //galleryBuildInit2 : 'transform-origin_top right',
        //thumbnailL1BuildInit2: 'thumbnail_transform-origin_50% 150%',


        thumbnailL1BuildInit2XXX: '.nGY2GThumbnailAlbumTitle_border-left_5px solid #23CB99|.nGY2GThumbnailAlbumTitle_margin_20px|\
              title_backgroundColor_rgba(200,200,200,0.8)|title_color_#000',

         thumbnailL1HoverEffect2xx: 'label_left_-100%_0%|image_scale_1.00_1.95',
        
        
        thumbnailL2HoverEffect2XXX: 'image_scale_1.00_1.20|labelAppear|customlayer_backgroundColor_rgba(35,203,153,0.0)_rgba(35,203,153,0.8)|\
                thumbnail_translateZ_0px_150px_easeOutQuad_400| \
                thumbnail_rotateX_0deg_-10deg_easeOutBack_200| \
                thumbnail_rotateX_-10deg_0deg_delay250_keyframe_hoverin_easeOutBack_400',

        thumbnailL2BuildInit2XXX: 'customlayer_scale_1.3|customlayer_translateY_-15px|customlayer_translateX_-60%|customlayer_rotateZ_10deg',
        galleryBuildInit2XXX : 'perspective_900px|perspective-origin_50% 150%',

        thumbnailHoverEffect2xx: 'label_font-size_1em_1.5em|title_backgroundColor_rgba(255,255,255,0.34)_rgba(((35,203,153,0.8)|title_color_#000_#fff|image_scale_1.00_1.10_5000|image_rotateZ_0deg_4deg_5000',
        
        thumbnailL1HoverEffect2: 'image_scale_1.10_1.00|title_scale_1.00_1.20',
        thumbnailHoverEffect2: null,

thumbnailSelectable : true,
thumbnailToolbarImage : { topLeft: '', topRight : 'display' },
thumbnailToolbarAlbum : { topLeft: '', topRight : 'counter' },
gallerySorting : 'titleAsc',
//        thumbnailToolbarImage : null,
//        thumbnailToolbarAlbum: null,

        // thumbnailL1Label: { display: true, position:'overImageOnMiddle', hideIcons: true, titleFontSize: '1.5em', align: 'center'},
//        thumbnailL1Label: { display: true, position:'overImageOnTop', hideIcons: true, titleFontSize: '1.5em', align: 'left'},
//        thumbnailLabel: { display: true, position:'onBottomOverImage', hideIcons: true, titleFontSize: '1em', align: 'left', titleMultiLine:true, displayDescription: false},
        
//        thumbnailSelectable: false,
        breadcrumbHideIcons: true,
        navigationFontSize: '1.2em',
//        gallerySorting: 'random',
//        thumbnailDisplayInterval: 30,

        galleryTheme : { 
          thumbnail: { titleShadow : 'none', descriptionShadow : 'none', titleColor: '#000', labelBackground:'#ffe000' },
          navigationBreadcrumb: { background : '#3C4B5B' },
          navigationFilter: { background : '#2E7C7F', backgroundSelected: '#19676B', color: '#eee' }
        },
        
        galleryFilterTags: true,
        galleryL1FilterTags: false,
        paginationSwipe: true,
        // fnImgToolbarCustInit: fnImgToolbarCustClick,
        // fnImgToolbarCustDisplay: myImgToolbarCustDisplay,
        // fnImgToolbarCustClick: myImgToolbarCustClick,
        // fnGalleryRenderStart : myfnGalleryRenderStart,
        viewerToolbar : { display: false },
        viewerTools: { topRight:  'infoButton, zoomButton, fullscreenButton, closeButton' } ,  
        locationHash: false,
        title_translation_map: [
          { title: '1b', replace:'Bureaux EMERIGE gare [1B]' },
          { title: '1e2a coopimmo', replace:'22 rue de la Gare - Coopimmo [1E2A]' },
          { title: '2d1 studio kremlin1', replace:'Studio Kremlin - phase 1 [2d1]' },
          { title: '2d1 studio kremlin2', replace:'Studio Kremlin - phase 2 [2d1]' },
          { title: '2e1', replace:'Projet logements Paul-Vaillant Couturier [2E1]' },
          { title: '2g1 2h2', replace:'Projet logements Paul-Vaillant Couturier [2G1, 2H2]' },
          { title: '2g2', replace:'Residence Influence [2G2]' },
          { title: '2h1 le96 pvc', replace:'Le 96 [2H1]' },
          { title: '2I quai aux grains', replace:'Quai aux Grains [2I]' },
          { title: '2j1 minoterie', replace:'Minoterie [2J1]' },
          { title: '2j2 le val', replace:'Le Val [2J2]' },
          { title: '2k1', replace: 'Bureaux Les Nouveaux Constructeurs [2K1]' },
          { title: '2l1 madeleine delbrel', replace: 'Résidence Madeleine Delbrel [2L1]' },
          { title: '2l2 silver innov', replace: 'Silver Innov [2L2]' },
          { title: '2l3 villa moliere', replace: 'Résidence Villa Molière [2L3]' },
          { title: '2l4', replace: 'Bureaux Sirius [2L4]' },
          { title: '3b curl', replace: 'Bureaux Curl [3B]' },
          { title: '3c', replace: 'Bureaux site BHV [3C, 3D]' },
          { title: '3f bhv groupe scolaire', replace: 'Groupe Scolaire [3H]' },
          { title: '3f1 bhv petite halle', replace: 'La petite hall BHV [3F1]' },
          { title: '3g', replace: 'Projet Logements [3G]' },
          { title: '3h start', replace: 'Résidence START [3H]' },
          { title: '3h4 station geothermie', replace: 'Station de géothermie [3H4]' },
          { title: '3j1', replace: 'Projet logements [3J1]' },
          { title: '3l 3n', replace: 'Projet logements [3L, 3N]' },
          { title: '3l tours montrouge', replace: 'Tours de l\'Atelier Montrouge [3L]' },
          { title: '', replace: '' },
          { title: '', replace: '' },
          { title: '', replace: '' },
          { title: '', replace: '' },
          { title: '', replace: '' },
          { title: '', replace: '' },
          { title: '', replace: '' },
          { title: '', replace: '' },
          { title: '', replace: '' },
          { title: 'hzac le monde', replace:'Les Lettres - Le Monde [hors ZAC]' }
        ]

      });

            
      
      function goToByScroll(id){
          // Remove "link" from the ID
          id = id.replace("link", "");
          // Scroll
          $('html,body').animate({ scrollTop: $("#"+id).offset().top}, 200);
      }



      // ##### EXAMPLE DISPLAY SOURCE CODE
      jQuery('#btn_view_source').on( "click", function(e) {
        var code = '';
        switch( jQuery('#btn_view_source').data("demo") ) {
          case 'btn_layout1a':
            code = Demo_Mosaic_1.toString();
            jQuery('#ngy2_template').html(Prism.highlight(code, Prism.languages.javascript, 'javascript'));
            $('#ngy2_modal_source').modal();
            break;
          case 'btn_layout1b':
            code = Demo_Mosaic_2.toString();
            jQuery('#ngy2_template').html(Prism.highlight(code, Prism.languages.javascript, 'javascript'));
            $('#ngy2_modal_source').modal();
            break;
          case 'btn_layout2':
            code = Demo_Grid_1.toString();
            jQuery('#ngy2_template').html(Prism.highlight(code, Prism.languages.javascript, 'javascript'));
            $('#ngy2_modal_source').modal();
            break;
          case 'btn_layout2b':
            code = Demo_Grid_2.toString();
            jQuery('#ngy2_template').html(Prism.highlight(code, Prism.languages.javascript, 'javascript'));
            $('#ngy2_modal_source').modal();
            break;
          case 'btn_layout3':
            code = Demo_Justified.toString();
            jQuery('#ngy2_template').html(Prism.highlight(code, Prism.languages.javascript, 'javascript'));
            $('#ngy2_modal_source').modal();
            break;
          case 'btn_layout4':
            code = Demo_Cascading.toString();
            jQuery('#ngy2_template').html(Prism.highlight(code, Prism.languages.javascript, 'javascript'));
            $('#ngy2_modal_source').modal();
            break;
          case 'btn_layout5':
            code = Demo_Grid_Justified.toString();
            jQuery('#ngy2_template').html(Prism.highlight(code, Prism.languages.javascript, 'javascript'));
            $('#ngy2_modal_source').modal();
            break;
          case 'btn_layout6':
            code = Demo_Images_Videos.toString();
            jQuery('#ngy2_template').html(Prism.highlight(code, Prism.languages.javascript, 'javascript'));
            $('#ngy2_modal_source').modal();
            break;
        }
      });
      
      
      
      // ##### LAYOUT DEMO SELECTION
      var ngy2_layout_cnt=0;
      jQuery('.ngy2_layout_selection').on( "click", function(e) {
        jQuery('.ngy2_layout_selection').css({ 'border-color': '#eee', color: '#eee' }).removeClass('button-glow');
        jQuery(e.currentTarget).css({ 'border-color': '#23CB99', color: '#23CB99' }).addClass("button-glow");;
        jQuery("#nanogallery").nanogallery2('destroy');
 
        if( ngy2_layout_cnt > 0 ) {
          goToByScroll('ngy2_layout_demo');
        }
        ngy2_layout_cnt++;
      
        jQuery('#btn_view_source').css({opacity: 1});
        switch( jQuery(e.currentTarget)[0].id ) {

          // MOSAIC LAYOUT - sample 1
          case 'btn_layout1a':
            jQuery("#nanogallery_container").css({backgroundColor:'#111' });
            jQuery("#example_description").html("The mosaic layout enables full control of the gallery layout. This layout is not computed but is based on a self-defined pattern.");
            jQuery('#btn_view_source').data("demo","btn_layout1a");
            Demo_Mosaic_1();
            if( ngy2_layout_cnt > 1) {
              ga('send', 'event', 'click', 'index', 'layout_mosaic1');
            }
            break          
					
          case 'btn_layout1b':
            jQuery("#nanogallery_container").css({backgroundColor:'#fff' });		
            jQuery("#example_description").html("Another mosaic layout. This one with a custom hover effect. The lightbox has a bottom toolbar to display the image's title.");
            jQuery('#btn_view_source').data("demo","btn_layout1b");
            Demo_Mosaic_2();
            ga('send', 'event', 'click', 'index', 'layout_mosaic2');
            break
						
          // GRID LAYOUT 1
          case 'btn_layout2':
            jQuery("#nanogallery_container").css({backgroundColor:'#fff' });		
            jQuery("#example_description").html("Here all thumbnails have the same size in this grid layout. In this example, the image title is displayed at the bottom of the thumbnail. An interesting hover effect is defined, using a customized thumbnail tool.");
            jQuery('#btn_view_source').data("demo", "btn_layout2");
            Demo_Grid_1();
            ga('send', 'event', 'click', 'index', 'layout_grid1');
            break
						
          // GRID LAYOUT 2
          case 'btn_layout2b':
            jQuery("#nanogallery_container").css({backgroundColor:'#111' });
            jQuery("#example_description").html("This example shows how keyword filtering works. 3 keywords are defined in the images metadata: ocean, architecture, cars.");
            jQuery('#btn_view_source').data("demo", "btn_layout2b");
            Demo_Grid_2();
            ga('send', 'event', 'click', 'index', 'layout_grid2');
            break
						
          // JUSTIFIED LAYOUT
          case 'btn_layout3':
            jQuery("#nanogallery_container").css({backgroundColor:'#111' });		
            jQuery("#example_description").html("Justified layout: the width of the thumbnail is calculated to respect the image ratio.<br>This example shows a subtle display effect, using a combined gallery and thumbnail display animation. Gesture: the first touch on a thumbnail will display the title and the tools. The second touch will open the media.");
            jQuery('#btn_view_source').data("demo","btn_layout3");
            Demo_Justified();
            ga('send', 'event', 'click', 'index', 'layout_justified');
            break
						
          // CASCADING LAYOUT
          case 'btn_layout4':
            jQuery("#nanogallery_container").css({backgroundColor:'#111' });
            jQuery("#example_description").html("The cascading layout (sometimes also called mansonry layout) is column based. Each column has the same width. Image aspect ratio is conserved, with no cropping.");
            jQuery('#btn_view_source').data("demo","btn_layout4");
            Demo_Cascading();
            ga('send', 'event', 'click', 'index', 'layout_cascading');
            break
						
          case 'btn_layout5':
            jQuery("#nanogallery_container").css({backgroundColor:'#111' });
            jQuery("#example_description").html("Here we have a gallery with 2 levels. The first one displays the list of albums, with a grid layout. The second one displays the images, with a justified layout.");
            jQuery('#btn_view_source').data("demo","btn_layout5");
            Demo_Grid_Justified();
            ga('send', 'event', 'click', 'index', 'layout_grid_justified');
            break
          case 'btn_layout6':
            jQuery("#nanogallery_container").css({backgroundColor:'#111' });
            jQuery("#example_description").html("Here the gallery combines videos (hosted on Youtube, Dailymotion and Vimeo) and self hosted images.");
            jQuery('#btn_view_source').data("demo","btn_layout6");
            Demo_Images_Videos();
            ga('send', 'event', 'click', 'index', 'layout_images_videos');
            break
          case 'btn_layout7':
            jQuery("#example_description").html("This demo on Codepen shows how selection of thumbnails can be managed.");
            jQuery("#nanogallery").html('<a class="btn btn-default" href="https://codepen.io/Kris-B/pen/RyaLaG" target="_blank"><i class="fa fa-long-arrow-right" aria-hidden="true"></i> display on Codepen</a>')
            jQuery('#btn_view_source').css({opacity: 0.4});
            ga('send', 'event', 'click', 'index', 'layout_checkboxes');
            break;
        }
      });
      $( "#btn_layout1a" ).trigger( "click" );
      
      
      
      function Demo_Mosaic_1() {

        jQuery("#nanogallery").nanogallery2({
        
          // CONTENT SOURCE
          // The optional add-on nanoPhotosProvider is used for this example - this is not mandatory and can easily be replaced by a list of medias
          kind: 'nano_photos_provider2',
          dataProvider: 'https://nano.gallery/ngy2/demo1/nano_photos_provider2/nano_photos_provider2.php',
          album: 'people',
         
          // GALLERY AND THUMBNAIL LAYOUT
          galleryMosaic : [
            { w: 2, h: 2, c: 1, r: 1 },
            { w: 1, h: 1, c: 3, r: 1 },
            { w: 1, h: 1, c: 3, r: 2 },
            { w: 1, h: 2, c: 4, r: 1 },
            { w: 2, h: 1, c: 5, r: 1 },
            { w: 2, h: 2, c: 5, r: 2 },
            { w: 1, h: 1, c: 4, r: 3 },
            { w: 2, h: 1, c: 2, r: 3 },
            { w: 1, h: 2, c: 1, r: 3 },
            { w: 1, h: 1, c: 2, r: 4 },
            { w: 2, h: 1, c: 3, r: 4 },
            { w: 1, h: 1, c: 5, r: 4 },
            { w: 1, h: 1, c: 6, r: 4 }
          ],
          galleryMaxRows: 1,
          galleryDisplayMode: 'rows',
          gallerySorting: 'random',

          thumbnailHeight: '180', thumbnailWidth: '220',
          thumbnailAlignment: 'scaled',
          thumbnailGutterWidth: 0, thumbnailGutterHeight: 0,
          thumbnailBorderHorizontal: 0, thumbnailBorderVertical: 0,

          thumbnailToolbarImage: null,
          thumbnailToolbarAlbum: null,
          thumbnailLabel: { display: false },

          // DISPLAY ANIMATION
          galleryDisplayTransitionDuration: 1500,
          thumbnailDisplayTransition: 'slideLeft',
          thumbnailDisplayTransitionDuration: 600,
          thumbnailDisplayInterval: 30,

          // THUMBNAIL HOVER ANIMATION
          thumbnailBuildInit2: 'image_scale_1.15',
          thumbnailHoverEffect2: 'thumbnail_scale_1.00_1.05_300|image_scale_1.15_1.00',
          touchAnimation: true,
          touchAutoOpenDelay: 500,

          // LIGHTBOX
          viewerToolbar: { display: false },
          viewerTools:    {
            topLeft:   'label',
            topRight:  'shareButton, rotateLeft, rotateRight, fullscreenButton, closeButton'
          },
     
          // DEEP LINKING
          locationHash: true
        });
      }
      
      
      function Demo_Mosaic_2() {
        jQuery("#nanogallery").nanogallery2({
        
          // CONTENT SOURCE
          // The optional add-on nanoPhotosProvider is used for this example - this is not mandatory and can easily be replaced by a list of medias
          kind: 'nano_photos_provider2',
          dataProvider: 'https://nano.gallery/ngy2/demo2/nano_photos_provider2/nano_photos_provider2.php',
          album: 'fun',
          galleryDisplayTransitionDuration: 1500,
         
          // GALLERY AND THUMBNAIL LAYOUT
          galleryMosaic : [
            { w: 1, h: 1, c: 1, r: 1 },
            { w: 1, h: 1, c: 2, r: 1 },
            { w: 1, h: 1, c: 3, r: 1 },
            { w: 1, h: 1, c: 4, r: 1 },
            { w: 1, h: 1, c: 5, r: 1 },
            { w: 1, h: 1, c: 6, r: 1 },
            { w: 1, h: 2, c: 1, r: 2 },
            { w: 2, h: 2, c: 2, r: 2 },
            { w: 2, h: 2, c: 4, r: 2 },
            { w: 1, h: 2, c: 6, r: 2 },
            { w: 1, h: 1, c: 1, r: 4 },
            { w: 1, h: 1, c: 2, r: 4 },
            { w: 1, h: 1, c: 3, r: 4 },
            { w: 1, h: 1, c: 4, r: 4 },
            { w: 1, h: 1, c: 5, r: 4 },
            { w: 1, h: 1, c: 6, r: 4 }
          ],
          galleryMaxRows: 1,
          galleryDisplayMode: 'rows',
          gallerySorting: 'random',

          thumbnailAlignment: 'scaled',
          thumbnailHeight: '180', thumbnailWidth: '220',
          thumbnailGutterWidth: 0, thumbnailGutterHeight: 0,
          thumbnailBorderHorizontal: 0, thumbnailBorderVertical: 0,

          thumbnailToolbarImage : null,
          thumbnailToolbarAlbum: null,

          thumbnailLabel: { display: false },
          
          // DISPLAY ANIMATION
          thumbnailDisplayTransition: 'flipDown',
          thumbnailDisplayTransitionDuration: 600,
          thumbnailDisplayInterval: 30,


          // HOVER ANIMATION
          thumbnailBuildInit2: '.nGY2GThumbnailAlbumTitle_border-left_5px solid #23CB99|.nGY2GThumbnailAlbumTitle_margin_20px|\
                title_backgroundColor_rgba(200,200,200,0.8)|title_color_#000',
          thumbnailHoverEffect2: 'image_scale_1.00_1.15_500_bounce|image_rotateZ_0deg_05deg',
          touchAnimation: true,
          touchAutoOpenDelay: 500,

          // LIGHTBOX
          viewerToolbar:    {   // bottom toolbar
            standard:  'label',
            minimized: 'label' },
          viewerTools:    {
            topLeft:   '',
            topRight:  'shareButton, rotateLeft, rotateRight, fullscreenButton, closeButton'
          },
      
          // DEEP LINKING
          locationHash: false
        });
      }
      


      function Demo_Grid_1() {
        jQuery("#nanogallery").nanogallery2({

          // CONTENT SOURCE
          // The optional add-on nanoPhotosProvider is used for this example - this is not mandatory and can easily be replaced by a list of medias
          kind: 'nano_photos_provider2',
          dataProvider: 'https://nano.gallery/ngy2/demo3/nano_photos_provider2/nano_photos_provider2.php',
          album: 'motors',

          // GALLERY AND THUMBNAIL LAYOUT
          galleryDisplayMode: 'moreButton',
          galleryMaxRows: 3,
          galleryMaxItems: 15,
          gallerySorting: 'random',
         
          thumbnailHeight: '300', thumbnailWidth: '300',
          thumbnailAlignment: 'center',
          thumbnailBorderHorizontal: 0, thumbnailBorderVertical: 0,
          thumbnailGutterWidth : 100, thumbnailGutterHeight : 100,
          
          // THUMBNAIL TOOLS & LABEL
          thumbnailLabel: { display: true, position:'onBottom', align: 'left'},
          thumbnailToolbarImage :  { bottomLeft : 'display' },
          // replace the default DISPLAY tool icon
          icons: {thumbnailDisplay: '<i class="fa fa-long-arrow-right" aria-hidden="true"></i> display'},
          
          // DISPLAY ANIMATION
          galleryDisplayTransition: 'slideUp',
          galleryDisplayTransitionDuration: 1000,
          thumbnailDisplayTransition: 'scaleDown',
          thumbnailDisplayTransitionDuration: 300,
          thumbnailDisplayInterval: 10,


          // THUMBNAIL'S HOVER ANIMATION
          thumbnailBuildInit2 : 'tools_font-size_1.5em|title_font-size_1.5em',
          thumbnailHoverEffect2 : 'image_scale_1.00_1.20_1000|tools_opacity_0_1|tools_translateX_-30px_0px|title_opacity_1_0|title_translateX_0px_-30px',
          touchAnimation: true,
          touchAutoOpenDelay: 800,

          // GALLERY THEME
          galleryTheme : { 
            thumbnail: { borderRadius: '10px', background: '#fff', titleShadow : 'none', titleColor: '#000', labelBackground: '#ff0' },
            thumbnailIcon: { color: '#000', shadow: 'none' },
          },
          
          // LIGHTBOX
          // Hide the bottom toolbar and media title
          viewerToolbar: { display: false },

          // DEEP LINKING
          locationHash: false
        });
      }
      
      
      function Demo_Grid_2() {
        jQuery("#nanogallery").nanogallery2({

          // CONTENT SOURCE
          // The optional add-on nanoPhotosProvider is used for this example - this is not mandatory and can easily be replaced by a list of medias
          kind: 'nano_photos_provider2',
          dataProvider: 'https://nano.gallery/ngy2/demo4/nano_photos_provider2/nano_photos_provider2.php',

          // KEYWORD FILTERING
          galleryFilterTags: true,
          galleryFilterTagsMode: 'multiple',

          // GALLERY AND THUMBNAIL LAYOUT
          thumbnailHeight: '250', thumbnailWidth: '250',
          thumbnailAlignment: 'fillWidth',
          galleryDisplayMode: 'fullContent',
          gallerySorting: 'random',

          thumbnailGutterWidth: 10, thumbnailGutterHeight: 10,
          thumbnailBorderHorizontal: 2, thumbnailBorderVertical: 2,

          // DISPLAY ANIMATION
          galleryDisplayTransitionDuration: 1000,
          thumbnailDisplayTransition: 'scaleUp',
          thumbnailDisplayTransitionDuration: 300,
          thumbnailDisplayInterval: 15,

          // THUMBNAIL TOOLS & LABEL
          thumbnailLabel: { display: true, position:'onBottomOverImage', hideIcons: true, titleFontSize: '1em', align: 'left', titleMultiLine:true, displayDescription: false},
          thumbnailToolbarImage: null,
          thumbnailToolbarAlbum: null,

          // THUMBNAIL HOVER ANIMATION
          thumbnailHoverEffect2: 'label_font-size_1em_1.5em|title_backgroundColor_rgba(255,255,255,0.34)_rgba(((35,203,153,0.8)|title_color_#000_#fff|image_scale_1.00_1.10_5000|image_rotateZ_0deg_4deg_5000',
          touchAnimation: true,
          touchAutoOpenDelay: 800,
          
          // GALLERY THEME
          galleryTheme : { 
            thumbnail: { titleShadow : 'none', titleColor: '#fff', borderColor: '#fff' },
            navigationBreadcrumb: { background : '#3C4B5B' },
            navigationFilter: { background : '#003C3F', backgroundSelected: '#2E7C7F', color: '#fff' }
          },
          
          // DEEP LINKING
          locationHash: false
        });
      }


      function Demo_Justified() {
        jQuery("#nanogallery").nanogallery2({

          // CONTENT SOURCE
          // The optional add-on nanoPhotosProvider is used for this example - this is not mandatory and can easily be replaced by a list of medias
          kind: 'nano_photos_provider2',
          dataProvider: 'https://nano.gallery/ngy2/demo5/nano_photos_provider2/nano_photos_provider2.php',
          album: 'people',
          
          // GALLERY AND THUMBNAIL LAYOUT
          thumbnailHeight: '250', thumbnailWidth: 'auto',
          galleryMaxRows: 3,
          galleryDisplayMode: 'pagination',
          gallerySorting: 'random',
          thumbnailAlignment: 'fillWidth',
          thumbnailL1GutterWidth: 20,
          thumbnailL1GutterHeight: 20,
          thumbnailBorderHorizontal: 1,
          thumbnailBorderVertical: 1,

          // THUMBNAIL TOOLS & LABEL
          thumbnailL1Label: { display: true, position:'overImageOnTop', hideIcons: true, titleFontSize: '1.5em', align: 'left'},
          thumbnailToolbarImage :  { topLeft: 'select', bottomRight : 'featured,display,download,info' },

          // DISPLAY ANIMATION
          galleryDisplayTransition: 'rotateX',        // gallery display animation
          galleryDisplayTransitionDuration: 1500,
          thumbnailDisplayTransition: 'flipUp',       // thumbnail display animation
          thumbnailDisplayTransitionDuration: 400,
          thumbnailDisplayInterval: 60,

          // THUMBNAIL'S HOVER ANIMATION
          thumbnailHoverEffect2: 'toolsSlideUp|labelSlideDown',
          touchAnimation: true,
          touchAutoOpenDelay: -1,

          // GALLERY THEME
          galleryTheme : { 
            thumbnail: { titleShadow : 'none', descriptionShadow : 'none', titleColor: '#fff', borderColor: '#fff' },
          },
          
          // DEEP LINKING
          locationHash: false
        });
      }


      function Demo_Cascading() {
        jQuery("#nanogallery").nanogallery2({

          // CONTENT SOURCE
          // The optional add-on nanoPhotosProvider is used for this example - this is not mandatory and can easily be replaced by a list of medias
          kind: 'nano_photos_provider2',
          dataProvider: 'https://nano.gallery/ngy2/demo6/nano_photos_provider2/nano_photos_provider2.php',
          album: 'nature',

          // GALLERY AND THUMBNAIL LAYOUT
          galleryDisplayMode: 'fullContent',
          gallerySorting: 'random',
          thumbnailHeight: 'auto', thumbnailWidth: '300',
          thumbnailBaseGridHeight: 50,
          thumbnailAlignment: 'fillWidth',
          thumbnailL1GutterWidth: 4,
          thumbnailL1GutterHeight: 4,
          thumbnailBorderHorizontal: 5,
          thumbnailBorderVertical: 5,

          // THUMBNAIL TOOLS & LABEL
          thumbnailLabel: { display: true, position:'onBottom', hideIcons: true, titleFontSize: '1em', align: 'right', titleMultiLine:true, displayDescription: false},
          thumbnailToolbarAlbum: null,
          thumbnailToolbarImage :  { bottomRight : 'display' },
          // replace the default DISPLAY tool icon
          icons: {thumbnailDisplay: '<i class="fa fa-long-arrow-right" aria-hidden="true"></i> display'},

          // DISPLAY ANIMATION
          thumbnailDisplayTransition: 'slideDown',
          thumbnailDisplayTransitionDuration: 500,
          thumbnailDisplayInterval: 30,

          // THUMBNAIL'S HOVER ANIMATION
          thumbnailHoverEffect2: 'label_translateY_0px_-20px|image_scale_1.00_1.10|image_rotateZ_0deg_3deg|image_translateY_0px_-20px|tools_opacity_0_1|tools_translateY_30px_0px',
          touchAnimation: true,
          touchAutoOpenDelay: 800,

          // GALLERY THEME
          galleryTheme : { 
            thumbnail: { background: '#444', backgroundImage: 'linear-gradient(315deg, #111 0%, #557 90%)', borderColor: '#000', labelOpacity : 1, labelBackground: '#444', titleColor: '#eee', titleBgColor: '#444', titleShadow: '' },
          },
          
          // DEEP LINKING
          locationHash: false
        });
      }


      function Demo_Grid_Justified() {
        jQuery("#nanogallery").nanogallery2({

          // CONTENT SOURCE
          // The optional add-on nanoPhotosProvider is used for this example - this is not mandatory and can easily be replaced by a list of medias
          kind: 'nano_photos_provider2',
          dataProvider: 'https://nano.gallery/ngy2/demo7/nano_photos_provider2/nano_photos_provider2.php',

          // GALLERY AND THUMBNAIL LAYOUT
          galleryL1DisplayMode: 'fullContent',                // first level display mode -> fullContent
          galleryDisplayMode: 'rows',                         // other levels display mode -> 4 rows
          galleryMaxRows: 4,
          gallerySorting: 'random',

          // thumbnail on first gallery level
          thumbnailL1Height: 120, thumbnailL1Width: 600,      // first level -> grid kayout
          thumbnailL1GutterWidth: 20,
          thumbnailL1GutterHeight: 20,
          thumbnailL1BorderHorizontal: 10,
          thumbnailL1BorderVertical: 10,

          // thumbnail on other gallery level
          thumbnailHeight: 400, thumbnailWidth: 'auto',       // other levels -> justified layout
          thumbnailGutterWidth: 2,
          thumbnailGutterHeight: 2,
          thumbnailBorderHorizontal: 0,
          thumbnailBorderVertical: 0,

          thumbnailAlignment: 'fillWidth',

          // THUMBNAIL TOOLS & LABEL
          thumbnailToolbarImage : null,
          thumbnailToolbarAlbum: null,
          // first level label
          <!-- thumbnailL1Label: { display: true, position:'overImageOnBottom', hideIcons: true, titleFontSize: '1em', align: 'center', titleMultiLine:true, displayDescription: false}, -->
          thumbnailL1Label: { display: true, valign:'bottom', hideIcons: true, titleFontSize: '3em', align: 'center', titleMultiLine:true, displayDescription: false},
          // other level label
          thumbnailLabel: { display: true, position:'overImageOnBottom', hideIcons: true, titleFontSize: '1em', align: 'center', titleMultiLine:true, displayDescription: false},

					thumbnailToolbarAlbum: { topRight: 'counter' },

          // DISPLAY ANIMATION
          thumbnailL1DisplayTransition: 'flipUp',         // first level display animation
          thumbnailDisplayTransition: 'slideDown',        // other levels display animation
          thumbnailDisplayTransitionDuration: 500,
          thumbnailDisplayInterval: 30,

          // THUMBNAIL'S HOVER ANIMATION
          // first level
          thumbnailL1BuildInit2: 'title_font-weight_bold',
          thumbnailL1HoverEffect2: 'imageGrayOff|title_color_#fff_#aaa|labelOpacity50',
          // other levels -> no hover effect
          // touch handling
          touchAnimation: false,
          touchAutoOpenDelay: 800,

          // GALLERY THEME
          galleryTheme : { 
            thumbnail: { titleShadow : '', descriptionShadow : 'none', titleColor: '#fff', borderColor: '#000' },
            navigationBreadcrumb: { background : '#3C4B5B' },
          },
          
          // DEEP LINKING
          locationHash: false
        });
      }


      function Demo_Images_Videos() {
        jQuery("#nanogallery").nanogallery2({

          // CONTENT SOURCE
					items:[
						{
							src:          'https://vimeo.com/32875422',                           // media url
							srct:         'https://i.vimeocdn.com/video/222726041_1280x720.jpg',  // media thumbnail url
							title:        'Vimeo video',                                          // media title
						},
						{ src: 'https://www.youtube.com/watch?v=i5qOzqD9Rms', title: 'Youtube video' },
						{ src: 'https://www.dailymotion.com/video/x4wtyl6',   title: 'Dailymotion video' },
						{ src: 'berlin1.jpg',      srct: 'berlin1t.jpg',   title: 'Self hosted image' },
						{ src: 'berlin2.jpg',      srct: 'berlin2t.jpg',   title: 'Self hosted image' }
					],
					itemsBaseURL:    'https://nanogallery2.nanostudio.org/samples/',
		
          // GALLERY AND THUMBNAIL LAYOUT
          galleryDisplayMode: 'fullContent',
          gallerySorting: 'random',


          // thumbnail
          thumbnailHeight: 300, thumbnailWidth: 'auto',
          thumbnailGutterWidth: 2,
          thumbnailGutterHeight: 2,
          thumbnailBorderHorizontal: 0,
          thumbnailBorderVertical: 0,

          thumbnailAlignment: 'fillWidth',

          // THUMBNAIL TOOLS & LABEL
          thumbnailToolbarImage : null,
          thumbnailToolbarAlbum: null,
          thumbnailLabel: { display: true, position:'overImageOnBottom', hideIcons: true, titleFontSize: '2em', align: 'center', titleMultiLine:true, displayDescription: false},

          // DISPLAY ANIMATION
          thumbnailL1DisplayTransition: 'flipUp',         // first level display animation
          thumbnailDisplayTransition: 'slideDown',        // other levels display animation
          thumbnailDisplayTransitionDuration: 500,
          thumbnailDisplayInterval: 30,

          // THUMBNAIL'S HOVER ANIMATION
          // first level
          thumbnailBuildInit2: 'title_font-weight_bold',
          thumbnailHoverEffect2: 'imageBlurOff',
          // other levels -> no hover effect
          // touch handling
          touchAnimation: false,
          touchAutoOpenDelay: 800,

          // GALLERY THEME
          galleryTheme : { 
            thumbnail: { titleShadow : '', descriptionShadow : 'none', titleColor: '#fff', borderColor: '#000' },
            navigationBreadcrumb: { background : '#3C4B5B' },
          },
          
          // DEEP LINKING
          locationHash: false
        });
      }

      
      // ##### TEMPLATE TAB
      var ngy2_template_cnt = 0;
      jQuery('#ngy2_init1').on( "click", function(e) {
        jQuery('#init_markup').css({ 'display': 'block' });
        jQuery('#init_js').css({ 'display': 'none' });

        jQuery('#ngy2_init1').css({ 'background-color': '#23CB99', 'color': '#000' });
        jQuery('#ngy2_init2').css({ 'text-decoration': 'none', 'background-color':'#fff', 'color': '#000' });
        
        jQuery('#ngy2_init2').find('i').removeClass('fa-check-circle-o').addClass('fa-circle-o');
        jQuery('#ngy2_init1').find('i').removeClass('fa-circle-o').addClass('fa-check-circle-o');
        if( ngy2_template_cnt > 0 ) {
          ga('send', 'event', 'click', 'index', 'template_markup');
        }
        ngy2_template_cnt++;
      });
      jQuery('#ngy2_init2').on( "click", function(e) {
        jQuery('#init_js').css({ 'display': 'block' });
        jQuery('#init_markup').css({ 'display': 'none' });
        //jQuery('#ngy2_lic2').css({ 'text-decoration': 'underline', 'background-color': '#fff' });
        jQuery('#ngy2_init2').css({ 'background-color': '#23CB99', 'color': '#000' });
        jQuery('#ngy2_init1').css({ 'text-decoration': 'none', 'background-color':'#fff', 'color': '#000' });
        
        jQuery('#ngy2_init1').find('i').removeClass('fa-check-circle-o').addClass('fa-circle-o');
        jQuery('#ngy2_init2').find('i').removeClass('fa-circle-o').addClass('fa-check-circle-o');
        if( ngy2_template_cnt > 0 ) {
          ga('send', 'event', 'click', 'index', 'template_javascript');
        }
        ngy2_template_cnt++;
      });
      $('#ngy2_init1').trigger('click');

      
      
      
      function fnOpenNewTab(e) {
        jQuery('.nGY2Viewer a').on( "click", function(e) {
          window.open( $(this).attr("href"), '_blank');
          e.stopPropagation();
          e.preventDefault();
          return true;
        });
      }
      
      // BOOTSTRAP TOGGLE BUTTONS -> activate
      $().button('toggle')
      

      jQuery('#btnsearch').on('click', function() {
        // jQuery("#nanogallery").nanogallery2('displayItem', 'fun/fun%2Fphoto%20by%20himanshu%20singh%20gurjar');
       //alert(jQuery("#nanogallery").nanogallery2('search', jQuery('#ngy2search').val()) );
       jQuery("#nanogallery").nanogallery2('search2', jQuery('#ngy2search').val(), jQuery('#ngy2search2').val() );
       // jQuery("#nanogallery").nanogallery2('searchSetTags', jQuery('#ngy2search2').val() );
       alert(jQuery("#nanogallery").nanogallery2('search2Execute'));
      });

      
      
      function selectImage(items) {
        var obj = items[0];
        alert(obj.title);
        //$('#@(Model.ImageType)Key').val(obj.title);
        //$('#@(Model.ImageType)Image > img').attr('src', obj.src);
        //$('#modal-container').modal('hide');
      }      

      
      
      
      var  myfnGalleryRenderStart =  function( idx ) {
//        alert('ok');
      }


      

      
      
      
      var listAlbums = ['motors', 'people', 'architecture'];
      var displayAlbum = listAlbums[Math.floor(Math.random() * listAlbums.length)];
      
      jQuery("#nanogallery4XXX").nanogallery2({

        // kind: 'nano_photos_provider2',
        dataProvider: 'https://nano.gallery/nano_photos_provider2/nano_photos_provider2.php',
        album: displayAlbum,

        thumbnailLastImgSliderDelay: 1000,
        
        galleryRenderDelay: 4000,
        galleryDisplayTransitionDuration: 1500,

        thumbnailDisplayTransition: 'none',
        thumbnailDisplayInterval: 90,

        thumbnailHeight: 200, thumbnailWidth: 200,

        galleryDisplayMode: 'rows',
        galleryMaxRows: 2,
        thumbnailOpenImage: false,

        thumbnailHoverEffect2: 'imageGrayOn',

        
        // thumbnailToolbarImage : { topLeft: 'select', topRight : 'share,featured,download' },

        thumbnailLabel: { display: false, position:'overImageOnBottom', hideIcons: true, titleFontSize: '1em', align: 'left', titleMultiLine:true},
        thumbnailBorderHorizontal: 0,
        thumbnailBorderVertical: 0,
        thumbnailL1GutterWidth: 5,
        thumbnailL1GutterHeight: 5,
        
        thumbnailSelectable: false,
        breadcrumbHideIcons: true,
        navigationFontSize: '1.2em',
        gallerySorting: 'random',
        galleryTheme : { 
          thumbnail: { titleShadow : 'none', descriptionShadow : 'none', titleColor: '#fff' },
          navigationBreadcrumb: { background : '#3C4B5B' },
          navigationFilter: { background : '#2E7C7F', backgroundSelected: '#19676B', color: '#eee' }
        }
      });      

      
      
      // https://codepen.io/Kris-B/pen/wJKowg
      
      jQuery('#btn_test').on('click', function() {
        //rnd++;
        // jQuery("#nanogallery").nanogallery2('destroy');
//        alert('ok');
        var instance=$("#nanogallery").nanogallery2('instance');


        var ngy2data = $("#nanogallery").nanogallery2('data');


        var baseURL = 'https://nanogallery2.nanostudio.org/samples/';        
        // create the new item
        var ID = ngy2data.items.length + 1;
        var albumID = '0';
        var newItem = NGY2Item.New(instance, 'new berlin ' + ID, '', ID, albumID, 'image', '' );

        // define thumbnail -> image displayed in the gallery
        newItem.thumbSet( baseURL + 'berlin2t.jpg', 135, 204); // w,h

        // define URL of the media to display in lightbox
        newItem.setMediaURL( baseURL + 'berlin2.jpg', 'img');        
        newItem.addToGOM();
        
        //$("#nanogallery").nanogallery2('refresh');
  
  // selected items
//  var sel = '';
//  ngy2data.items.forEach( function(item) {
//    if( item.selected ) {
//      item.delete();
//    }
//  });

        
        
//        $("#nanogallery").nanogallery2('refresh');
        $("#nanogallery").nanogallery2('resize');
        
      });
      
      
      
      
      
      function fnImgToolbarCustClick(e) {
        console.dir(e);
      }
      
      function myImgToolbarCustDisplay( $cu, item ) {
        console.dir($cu);
      }
      
      function myImgToolbarCustClick(action, $elt , item) {
        console.log(action);
        console.dir($elt);
      
      }
    
      function myTnEffectHBlurInit( $thumbnail, item, counter ) {
        // add an SVG element to each thumbnail with a unique ID
        var svg='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="filters" style="display:hidden;">';
        svg+='<defs>';
        svg+='<filter id="ngy2-hblur'+counter+'">';
        svg+='<feGaussianBlur in="SourceGraphic" stdDeviation="20,0" />'
        svg+='</filter>';
        svg+='</defs>';
        svg+='<defs>';
        //svg+='<filter id="ngy2-hblurl'+counter+'">';
        //svg+='<feGaussianBlur in="SourceGraphic" stdDeviation="20,0" />'
        //svg+='</filter>';
        //svg+='</defs>';
        svg+='</svg>';
        $thumbnail.append(svg);
        // hblur on image
        $thumbnail.find('.nGY2GThumbnailImg').css('-webkit-filter','url(#ngy2-hblur'+counter+')');
        $thumbnail.find('.nGY2GThumbnailImg').css('filter','url(#ngy2-hblur'+counter+')');
        // hblur on label
        //$thumbnail.find('.nGY2GThumbnailLabel').css('-webkit-filter','url(#ngy2-hblurl'+counter+')');
        //$thumbnail.find('.nGY2GThumbnailLabel').css('filter','url(#ngy2-hblurl'+counter+')');
      }
      
      function myTnEffectHBlurHover( $thumbnail, item, counter ) {
        var context={};
        context.item=item;
        context.$svg=$thumbnail.children('svg').find('feGaussianBlur')[0];
        // context.$svg2=$thumbnail.children('svg').find('feGaussianBlur')[1];

        // animation
        var tweenable = new NGTweenable();
        tweenable.tween({
          attachment:   context,
          from:         { 'v': 20 },
          to:           { 'v': 0 },
          duration:     1000,
          delay:        0,
          easing:       'easeOutQuart',
          step: function (state, att) {
            if( item.$getElt() == null || !att.item.hovered) {
              // the thumbnail may be destroyed since the start of the animation
              // or thumbnail no more hovered
              return;
            }
            att.$svg.stdDeviationX.baseVal=state.v;
            // att.$svg2.stdDeviationX.baseVal=20-state.v;
          }
        });

      }
      
      function myTnEffectHBlurHoverOut( $thumbnail, item, counter ) {
        var context={};
        context.item=item;
        context.$svg=$thumbnail.children('svg').find('feGaussianBlur')[0];
        //context.$svg2=$thumbnail.children('svg').find('feGaussianBlur')[1];
        
        // animation
        var tweenable = new NGTweenable();
        tweenable.tween({
          attachment:   context,
          from:         { 'v': 0 },
          to:           { 'v': 20 },
          duration:     1000,
          delay:        0,
          easing:       'easeOutQuart',
          
          step: function (state, att) {
            if( item.$getElt() == null ) { return; }
            att.$svg.stdDeviationX.baseVal=state.v;
            //att.$svg2.stdDeviationX.baseVal=20-state.v;
          }
        });

      }
      
      jQuery("#nanogallery2XXX").nanogallery2({
        kind: 'flickr',
        userID: '34858669@N00',
        thumbnailDisplayTransition: 'slideUp',
        thumbnailDisplayInterval: 15,
        thumbnailHeight: 60, thumbnailWidth: 60,
        album: 'none',
        galleryDisplayMode: 'rows',
        thumbnailToolbarImage:null,
        thumbnailToolbarAlbum:null,
        galleryMaxRows: 2,
        gallerySorting: 'random',
        thumbnailLabel: { display: false},
        thumbnailBorderHorizontal: 0,
        thumbnailBorderVertical: 0,
        thumbnailGutterWidth : 0,
        thumbnailGutterHeight : 0,
        //fnThumbnailInit: myTnEffectHBlurInit,
        //fnThumbnailHover: myTnEffectHBlurHover,
        //fnThumbnailHoverOut: myTnEffectHBlurHoverOut,
        galleryRenderDelay: 2000,
        thumbnailOpenImage: false,
        locationHash: false
      });
      
      
      jQuery("#nanogallery3XXX").nanogallery2({
        kind: 'flickr',
        userID: '149035168@N08',
        //userID: '34858669@N00',
        thumbnailHeight: 170, thumbnailWidth: 170,
        breadcrumbOnlyCurrentLevel: true,
        //album: '30788454896',
        photoset: '72157675219521270',
        thumbnailToolbarAlbum:null,
        gallerySorting: 'random',
        thumbnailToolbarImage: null,
        
        galleryDisplayMode: 'rows',
        galleryMaxRows: 2,
        thumbnailLabel: { display: false, position: 'onBottom', align: 'left'},
        thumbnailHoverEffect2 : 'image_brightness_50%_100%|title_color_#888_#fff|thumbnail_scale_1.00_1.10_1500',
        thumbnailBorderHorizontal: 0,
        thumbnailBorderVertical: 0,
        thumbnailGutterWidth : 1,
        thumbnailGutterHeight : 1,
        galleryRenderDelay: 3000,
        locationHash: false
      });


      
      //  RANDOM DEMO
      var lastRnd=-1;
      var demos=[0, 1, 2, 3, 4, 5, 6, 7, 9]
      var rnd=randomIntFromInterval(0,demos.length-1);
      jQuery('#btn_random_demo').on('click', function() {
        //rnd++;
        jQuery("#nanogallery").nanogallery2('destroy');
        window.location.hash = "_";
        // while( rnd == lastRnd ) {
        //  rnd=randomIntFromInterval(0,4);
        // }
        // lastRnd=rnd;
        // rnd=9;
        ga('send', 'event', 'click', 'index', 'random');
        switch ( rnd ) {
          case 0:
            jQuery("#nanogallery").nanogallery2({
              kind: 'flickr',
              userID: '149035168@N08',    // nano studio
              photoset: 'NONE',
              thumbnailDisplayTransition: 'randomScale',
              thumbnailHeight: '200', thumbnailWidth: 'auto',
              galleryDisplayMode: 'rows',
              galleryPaginationMode: 'rectangles',
              galleryMaxRows: 1,
              thumbnailHoverEffect2 : 'image_scale_1.0_1.1_1500',
              thumbnailToolbarImage : { topRight : '', bottomRight : '' },
              thumbnailLabel: { display: false, position:'overImageOnBottom', hideIcons: true, titleFontSize: '1em', align: 'left', titleMultiLine:true},
              thumbnailBorderHorizontal: 5,
              thumbnailBorderVertical: 5,
              navigationFontSize: '1.0em',
              gallerySorting: 'random',
              galleryTheme : { thumbnail: {titleShadow : 'none', descriptionShadow : 'none'} },
              galleryLastRowFull: true,
              locationHash: false
            });
            break;
            
          case 6:
            jQuery("#nanogallery").nanogallery2({
              kind: 'flickr',
              userID: '149035168@N08',    // nano studio
              photoset: '72157673359560333',
              blackList: 'forhomepage|scrapbook|profil',
              thumbnailDisplayTransition: 'slideUp',
              thumbnailHeight: '450', thumbnailWidth: 'auto',
              thumbnailGutterWidth: 0,
              thumbnailGutterHeight: 0,
              thumbnailBorderHorizontal: 0,
              thumbnailBorderVertical: 0,
              //galleryLastRowFull: true,
              galleryDisplayMode: 'rows',
              galleryPaginationMode: 'numbers',
              galleryMaxRows: 4,
              
              thumbnailHoverEffect2 : 'image_opacity_100%_80%|imageGrayOn|labelAppear|toolsSlideDown',
              
              thumbnailToolbarImage : { topRight : 'download,share', bottomRight : '' },
              thumbnailLabel: { display: true, position:'onBottomOverImage', titleFontSize: '2.0em', align: 'left', titleMultiLine:true, displayDescription: true},
              gallerySorting: 'random',
              //galleryTheme : { thumbnail: { labelBackground: '#eef', titleShadow : 'none', descriptionShadow : 'none', titleColor: '#000', descriptionColor: '#000'} },
              locationHash: false
            });
            break;
            
          case 2:
            jQuery("#nanogallery").nanogallery2({
              kind: 'flickr',
              userID: '149035168@N08',    // nano studio
              photoset: 'NONE',
              blackList: 'forhomepage|scrapbook|profil',
              thumbnailDisplayTransition: 'slideUp',
              thumbnailHeight: 'auto', thumbnailWidth: '180',
              thumbnailBaseGridHeight: 50,
              thumbnailGutterWidth: 15,
              thumbnailGutterHeight: 15,
              thumbnailBorderHorizontal: 0,
              thumbnailBorderVertical: 0,
              thumbnailOpenImage: false,
              
              //thumbnailHoverEffect2 : 'toolsSlideUp|labelAppear',
              //thumbnailToolbarImage : { topRight : '', bottomRight : 'share,featured,download' },
              thumbnailLabel: { display: true, position:'onBottom', titleFontSize: '1.0em', align: 'left', titleMultiLine:true, displayDescription: true},
              gallerySorting: 'random',
              galleryTheme : { thumbnail: { labelBackground: '#eef', titleShadow : 'none', descriptionShadow : 'none', titleColor: '#000', descriptionColor: '#000'} },
              locationHash: false
            });
            break;
          case 3:
            jQuery("#nanogallery").nanogallery2({
              kind: 'flickr',
              userID: '149035168@N08',    // nano studio
              photoset: 'NONE',
              blackList: 'forhomepage|scrapbook|profil',
              //thumbnailDisplayTransition: 'randomScale',
              thumbnailHeight: '200', thumbnailWidth: '200',
              galleryDisplayMode: 'pagination',
              galleryPaginationMode: 'numbers',
              galleryMaxRows: 1,
              thumbnailHoverEffect2 : 'toolsSlideUp|labelAppear',
              thumbnailToolbarImage : { topRight : '', bottomRight : 'share,featured,download' },
              thumbnailLabel: { display: true, position:'overImageOnMiddle', titleFontSize: '1.5em', align: 'center', titleMultiLine:true},
              gallerySorting: 'random',
              galleryTheme : { thumbnail: { labelBackground: 'rgba(34, 34, 34, .3)', titleShadow : 'none'} },
              locationHash: false,
              galleryTheme: 'light'
            });
            break;
            
          case 4:
            jQuery("#nanogallery").nanogallery2({
              kind: 'flickr',
              userID: '149035168@N08',    // nano studio
              photoset: 'NONE',
              blackList: 'forhomepage|scrapbook|profil',
              thumbnailDisplayTransition: 'scaleUp',
              thumbnailDisplayInterval: 45,
              thumbnailHeight: '150', thumbnailWidth: '150',
              galleryDisplayMode: 'moreButton',
              
              galleryDisplayMoreStep: 2,
              thumbnailBorderVertical: 5,
              thumbnailBorderHorizontal: 5,
              thumbnailGutterWidth: 10,
              thumbnailGutterHeight: 10,
              // thumbnailHoverEffect2 : 'title_backgroundColor_rgba(255,255,255,0.34)_rgba(((84,84,84,0.8)|image_saturate_200%_100%|image_blur_1px_0px|labelAppear',
              thumbnailToolbarImage : { topRight : '', bottomRight : '' },
              //thumbnailLabel: { display: true, position:'overImageOnMiddle', titleFontSize: '1.5em', align: 'left', titleMultiLine:true},
              thumbnailLabel: { display: true, position:'overImageOnTop', hideIcons: false, titleFontSize: '1.2em', align: 'left', titleMultiLine:true},
              gallerySorting: 'random',
              galleryTheme : { thumbnail: { labelBackground: 'rgba(34, 34, 34, .0)', titleShadow : 'none', borderColor: '#fff'} },
              locationHash: false
            });
            break;
            
          case 5:
            jQuery("#nanogallery").nanogallery2({
              kind: 'flickr',
              userID: '149035168@N08',    // nano studio
              photoset: '72157675219521270',
              blackList: 'forhomepage|scrapbook|profil',
              thumbnailDisplayTransition: 'scaleUp',
              thumbnailHeight: '300', thumbnailWidth: '300',
              galleryDisplayMode: 'rows',
              galleryDisplayMoreStep: 2,
              thumbnailBorderVertical: 0,
              thumbnailBorderHorizontal: 0,
              thumbnailGutterWidth: 0,
              thumbnailGutterHeight: 0,
              thumbnailHoverEffect2 : 'image_scale_1.00_1.10_5000|title_color_rgba(0,0,0,1)_rgba(0,0,0,0)|customlayer_backgroundColor_rgba(73,146,149,0.90)_rgba(((73,146,149,0.0)',
              thumbnailToolbarImage : { topRight : '', bottomRight : '' },
              //thumbnailLabel: { display: true, position:'overImageOnMiddle', titleFontSize: '1.5em', align: 'left', titleMultiLine:true},
              thumbnailLabel: { display: true, position:'overImageOnMiddle', hideIcons: true, titleFontSize: '1.2em', align: 'center', titleMultiLine:true},
              gallerySorting: 'random',
              galleryTheme : { thumbnail: { labelBackground: 'rgba(34, 34, 34, .0)', titleShadow : 'none', borderColor: '#54840C'} },
              galleryLastRowFull  : true,
              galleryMaxRows: 1,
              locationHash: false
            });
            break;
          
          case 1:
            jQuery("#nanogallery").nanogallery2({
              kind: 'flickr',
              userID: '149035168@N08',    // nano studio
              photoset: '72157675219521270',
              blackList: 'forhomepage|scrapbook|profil',
              thumbnailDisplayTransition: 'scaleUp',
              thumbnailHeight: '400', thumbnailWidth: '450',
              galleryDisplayMode: 'rows',
              galleryMaxRows: 3,
              galleryDisplayMoreStep: 2,
              thumbnailBorderVertical: 2,
              thumbnailBorderHorizontal: 2,
              thumbnailGutterWidth: 10,
              thumbnailGutterHeight: 10,
              thumbnailHoverEffect2 : '.ngy2plusbutton_opacity_0_1|.ngy2plusbutton2_opacity_0_1|image_opacity_100%_60%|label_background_#000000_#2C3B4B|image_scale_1.10_1.00',
              thumbnailBuildInit2: '.ngy2plusbutton_translateY_-50%|.ngy2plusbutton_translateX_-50%',
              thumbnailToolbarImage : { topRight : '', bottomRight : '' },
              thumbnailLabel: { display: true, position:'onBottom', hideIcons: true, titleFontSize: '1.2em', align: 'center', titleMultiLine:true},
              gallerySorting: 'random',
              //galleryTheme : { thumbnail: { labelBackground: 'rgba(34, 34, 34, .0)', titleShadow : 'none'} },
              galleryLastRowFull: true,
              locationHash: false,
              fnThumbnailInit: myTnInit
            });
            break;
            
          case 7:
            jQuery("#nanogallery").nanogallery2({
              kind: 'flickr',
              userID: '34858669@N00',
              thumbnailDisplayTransition: 'slideUp',
              thumbnailDisplayInterval: 45,
              thumbnailHeight: 100, thumbnailWidth: 100,
              album: 'none',
              galleryDisplayMode: 'rows',
              thumbnailToolbarImage:null,
              thumbnailToolbarAlbum:null,
              galleryMaxRows: 3,
              gallerySorting: 'random',
              thumbnailLabel: { display: false},
              thumbnailBorderHorizontal: 0,
              thumbnailBorderVertical: 0,
              thumbnailGutterWidth : 0,
              thumbnailGutterHeight : 0,
              galleryTheme : { thumbnail : { background: '#444', backgroundImage: 'linear-gradient(315deg, #111 0%, #444 90%)' }},
              //fnThumbnailInit: myTnEffectHBlurInit,
              //fnThumbnailHover: myTnEffectHBlurHover,
              //fnThumbnailHoverOut: myTnEffectHBlurHoverOut,
              thumbnailOpenImage: false,
              galleryDisplayTransition: 'slideup',
              locationHash: false
            });
            break;
            
          case 9: // filter on tags
            jQuery("#nanogallery").nanogallery2({
              kind: 'google',
              userID: '111186676244625461692',              //userID: '34858669@N00',
              album: '5911699288924070209',
              thumbnailHeight: 250, thumbnailWidth: 'auto',
              breadcrumbOnlyCurrentLevel: true,
              thumbnailToolbarAlbum:null,
              gallerySorting: 'random',
              thumbnailToolbarImage: null,
              
              galleryTheme: { navigationFilter :    { color: '#aaa', background: '#19676B', colorSelected: '#fff', backgroundSelected: '#2E7C7F', borderRadius: '6px' } },
              
              galleryDisplayMode: 'fullcontent',
              thumbnailLabel: { display: true, position: 'overImageOnBottom', align: 'left'},
              thumbnailHoverEffect2 : 'thumbnail_scale_1.00_1.10_1500',
              thumbnailBorderHorizontal: 5,
              thumbnailBorderVertical: 5,
              thumbnailGutterWidth : 0,
              thumbnailGutterHeight : 0,
              galleryFilterTags: 'title',
              locationHash: false
            });
            break;
            
          case 8: // no more used
            jQuery("#nanogallery").nanogallery2({
              kind: 'flickr',
              userID: '149035168@N08',
              //userID: '34858669@N00',
              thumbnailHeight: 200, thumbnailWidth: 200,
              breadcrumbOnlyCurrentLevel: true,
              //album: '30788454896',
              photoset: '72157675219521270',
              thumbnailToolbarAlbum:null,
              gallerySorting: 'random',
              thumbnailToolbarImage: null,
              
              galleryDisplayMode: 'rows',
              galleryMaxRows: 1,
              thumbnailLabel: { display: true, position: 'overImageOnBottom', align: 'left'},
              thumbnailHoverEffect2 : 'image_brightness_130%_100%|title_color_#499295_#ffffff|thumbnail_scale_1.00_1.10_1500',
              thumbnailBorderHorizontal: 0,
              thumbnailBorderVertical: 0,
              thumbnailGutterWidth : 1,
              thumbnailGutterHeight : 1,
              locationHash: false
            });
            break;
          default:
            break;
        }
        rnd++;
        if( rnd > demos.length ) {
          rnd=0;
        }
      });
      
      function myTnInit( $e, item, GOMidx ) {
        var st='position:absolute;top:50%;left:10px;'
        $e.find('.nGY2GThumbnailSub').append('<div class="ngy2plusbutton" style="'+st+'"><button data-ngy2action="DISPLAY" type="button" class="btn btn-success btn-lg" ><i class="fa fa-search" aria-hidden="true"></i> &nbsp; display</button></div>');
        st='position:absolute;top:50%;right:10px;'
        $e.find('.nGY2GThumbnailSub').append('<div class="ngy2plusbutton2" style="'+st+'"><button data-ngy2action="SHARE" type="button" class="btn btn-success btn-lg" ><i class="fa fa-share-alt" aria-hidden="true"></i> &nbsp; share</button></div>');
      }

      
      function randomIntFromInterval(min,max) {
        return Math.floor(Math.random()*(max-min+1)+min);
      }
      
    });
  </script>

